# syntax=docker/dockerfile:1
FROM node:20-alpine AS base

ENV NODE_ENV=development

WORKDIR /workspace

# Copy workspace manifests so npm can resolve dependencies without cache
COPY package.json package-lock.json ./
COPY apps/web/package.json apps/web/package.json

RUN npm install --workspace apps/web --include-workspace-root

WORKDIR /workspace/apps/web

COPY apps/web ./

EXPOSE 3000

CMD ["npm", "run", "dev"]
